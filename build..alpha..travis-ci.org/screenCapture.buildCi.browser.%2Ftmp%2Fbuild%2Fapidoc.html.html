<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/andris9/inbox">inbox (v1.1.59)</a>
</h1>
<h4>This is a work in progress IMAP client for node.js.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox">module inbox</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient">
            function <span class="apidocSignatureSpan">inbox.</span>IMAPClient
            <span class="apidocSignatureSpan">(port, host, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.createConnection">
            function <span class="apidocSignatureSpan">inbox.</span>createConnection
            <span class="apidocSignatureSpan">(port, host, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.createXOAuthGenerator">
            function <span class="apidocSignatureSpan">inbox.</span>createXOAuthGenerator
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser">
            function <span class="apidocSignatureSpan">inbox.</span>lineparser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.</span>IMAPClient.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.</span>lineparser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.</span>mailbox</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.</span>starttls</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.</span>xoauth</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox.IMAPClient">module inbox.IMAPClient</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.IMAPClient">
            function <span class="apidocSignatureSpan">inbox.</span>IMAPClient
            <span class="apidocSignatureSpan">(port, host, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.super_">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox.IMAPClient.prototype">module inbox.IMAPClient.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._checkNewMail">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_checkNewMail
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._close">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._convertFromUTF7">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_convertFromUTF7
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._escapeString">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_escapeString
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._formatEnvelope">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_formatEnvelope
            <span class="apidocSignatureSpan">(envelopeData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._formatEnvelopeAddress">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_formatEnvelopeAddress
            <span class="apidocSignatureSpan">(address)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handleGreetingTimeout">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handleGreetingTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerGreeting">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerGreeting
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedCapability">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedCapability
            <span class="apidocSignatureSpan">(status)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedCondstore">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedCondstore
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedId">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedLogin">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedLogin
            <span class="apidocSignatureSpan">(status)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedLsub">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedLsub
            <span class="apidocSignatureSpan">(xinfo, callback, status)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedSelect">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedSelect
            <span class="apidocSignatureSpan">(callback, status, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedStartTLS">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedStartTLS
            <span class="apidocSignatureSpan">(status)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedCapability">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedCapability
            <span class="apidocSignatureSpan">(list)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedEnabled">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedEnabled
            <span class="apidocSignatureSpan">(list)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedFetch">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedFetch
            <span class="apidocSignatureSpan">(list)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedId">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedId
            <span class="apidocSignatureSpan">(list)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedIdle">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedIdle
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedList">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedList
            <span class="apidocSignatureSpan">(list)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedLsub">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedLsub
            <span class="apidocSignatureSpan">(list)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedSearch">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedSearch
            <span class="apidocSignatureSpan">(list)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._idleTimeout">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_idleTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._init">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._onClose">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onClose
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._onConnect">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._onData">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onData
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._onEnd">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onEnd
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._onError">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onError
            <span class="apidocSignatureSpan">(error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._onServerLog">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onServerLog
            <span class="apidocSignatureSpan">(type, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._onServerResponse">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onServerResponse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._parseBodystructure">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_parseBodystructure
            <span class="apidocSignatureSpan">(bs, parentBodypart)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._postAuth">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_postAuth
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._postCapability">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_postCapability
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._postReady">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_postReady
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._processCommandQueue">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_processCommandQueue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._responseRouter">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_responseRouter
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype._send">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_send
            <span class="apidocSignatureSpan">(data, callback, prewrite)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.addFlags">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>addFlags
            <span class="apidocSignatureSpan">(uid, flags, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.addLabels">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>addLabels
            <span class="apidocSignatureSpan">(uid, labels, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.close">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.connect">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>connect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.copyMessage">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>copyMessage
            <span class="apidocSignatureSpan">(uid, destination, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.createMailbox">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>createMailbox
            <span class="apidocSignatureSpan">(path, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.createMessageStream">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>createMessageStream
            <span class="apidocSignatureSpan">(uid)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.deleteMailbox">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>deleteMailbox
            <span class="apidocSignatureSpan">(path, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.deleteMessage">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>deleteMessage
            <span class="apidocSignatureSpan">(uid, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.fetchData">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>fetchData
            <span class="apidocSignatureSpan">(uid, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.fetchFlags">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>fetchFlags
            <span class="apidocSignatureSpan">(uid, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.getCurrentMailbox">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>getCurrentMailbox
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.getMailbox">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>getMailbox
            <span class="apidocSignatureSpan">(path, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.idle">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>idle
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.listFlags">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listFlags
            <span class="apidocSignatureSpan">(from, limit, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.listMailboxes">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listMailboxes
            <span class="apidocSignatureSpan">(path, all, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.listMessages">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listMessages
            <span class="apidocSignatureSpan">(from, limit, extendedOptions, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.listMessagesByUID">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listMessagesByUID
            <span class="apidocSignatureSpan">(from, to, extendedOptions, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.moveMessage">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>moveMessage
            <span class="apidocSignatureSpan">(uid, destination, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.openMailbox">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>openMailbox
            <span class="apidocSignatureSpan">(path, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.removeFlags">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>removeFlags
            <span class="apidocSignatureSpan">(uid, flags, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.removeLabels">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>removeLabels
            <span class="apidocSignatureSpan">(uid, labels, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.search">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>search
            <span class="apidocSignatureSpan">(query, isUid, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.storeMessage">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>storeMessage
            <span class="apidocSignatureSpan">(message, flags, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.updateFlags">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>updateFlags
            <span class="apidocSignatureSpan">(uid, flags, updateType, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.IMAPClient.prototype.updateLabels">
            function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>updateLabels
            <span class="apidocSignatureSpan">(uid, labels, updateType, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>ENTER_IDLE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>GREETING_TIMEOUT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>IDLE_TIMEOUT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>modes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>states</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox.lineparser">module inbox.lineparser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.lineparser">
            function <span class="apidocSignatureSpan">inbox.</span>lineparser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.super_">
            function <span class="apidocSignatureSpan">inbox.lineparser.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox.lineparser.prototype">module inbox.lineparser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype._addToBranch">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_addToBranch
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype._createNode">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_createNode
            <span class="apidocSignatureSpan">(defaultValue)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype._init">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype._nodeWalker">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_nodeWalker
            <span class="apidocSignatureSpan">(branch, local)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype._parseLine">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_parseLine
            <span class="apidocSignatureSpan">(line)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype.end">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>end
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype.finalize">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>finalize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype.write">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>write
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.lineparser.prototype.writeLiteral">
            function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>writeLiteral
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>states</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>types</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox.mailbox">module inbox.mailbox</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.mailbox.Mailbox">
            function <span class="apidocSignatureSpan">inbox.mailbox.</span>Mailbox
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.mailbox.detectMailboxType">
            function <span class="apidocSignatureSpan">inbox.mailbox.</span>detectMailboxType
            <span class="apidocSignatureSpan">(mailboxName)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox.starttls">module inbox.starttls</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.starttls.starttls">
            function <span class="apidocSignatureSpan">inbox.</span>starttls
            <span class="apidocSignatureSpan">(socket, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.inbox.xoauth">module inbox.xoauth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.inbox.xoauth.XOAuthGenerator">
            function <span class="apidocSignatureSpan">inbox.xoauth.</span>XOAuthGenerator
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox" id="apidoc.module.inbox">module inbox</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.IMAPClient" id="apidoc.element.inbox.IMAPClient">
        function <span class="apidocSignatureSpan">inbox.</span>IMAPClient
        <span class="apidocSignatureSpan">(port, host, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IMAPClient(port, host, options){
    Stream.call(this);

<span class="apidocCodeCommentSpan">    /**
     * Make this stream writeable. For future reference only, currently not needed
     */
</span>    this.writable = true;

    /**
     * Make this stream readable. Should be on by default though
     */
    this.readable = true;

    /**
     * Options object for this instance
     */
    this.options = options || {};

    /**
     * Port to use for connecting to the server
     */
    this.port = port || (this.options.secureConnection ? 993 : 143);

    /**
     * Server hostname
     */
    this.host = host || "localhost";

    /**
     * If set to true, print traffic between client and server to the console
     */
    this.debug = !!this.options.debug;

    /**
     * XOAuth2 token generator if XOAUTH2 auth is used
     * @private
     */
    this._xoauth2 = false;
    this._xoauth2RetryCount = 0;
    this._xoauth2UntaggedResponse = false;

    if(typeof this.options.auth &amp;&amp; typeof this.options.auth.XOAuth2){
        if(typeof this.options.auth.XOAuth2 == "object" &amp;&amp; typeof this.options.auth.XOAuth2.getToken == "function"){
            this._xoauth2 = this.options.auth.XOAuth2;
        }else if(typeof this.options.auth.XOAuth2 == "object"){
            if(!this.options.auth.XOAuth2.user &amp;&amp; this.options.auth.user){
                this.options.auth.XOAuth2.user = this.options.auth.user;
            }
            this._xoauth2 = xoauth2.createXOAuth2Generator(this.options.auth.XOAuth2);
        }
    }

    this._init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.createConnection" id="apidoc.element.inbox.createConnection">
        function <span class="apidocSignatureSpan">inbox.</span>createConnection
        <span class="apidocSignatureSpan">(port, host, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createConnection(port, host, options){
    return new IMAPClient(port, host, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var inbox = require("inbox");
```
### Create new IMAP connection

Create connection object with
```javascript
inbox.<span class="apidocCodeKeywordSpan">createConnection</span>(port, host, options)
```

where

* **port** is the port to the server (defaults to 143 on non-secure and to 993 on secure connection)
* **host** is the hostname of the server
* **options** is an options object for auth etc.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.createXOAuthGenerator" id="apidoc.element.inbox.createXOAuthGenerator">
        function <span class="apidocSignatureSpan">inbox.</span>createXOAuthGenerator
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createXOAuthGenerator(options){
    return new xoauth.XOAuthGenerator(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Or for login with XOAUTH (see examples/xoauth-3lo.js and examples/xoauth-2lo.js)

```javascript
// 3-legged- oauth
var client = inbox.createConnection(false, "imap.gmail.com", {
    secureConnection: true,
    auth:{
        XOAuthToken: inbox.<span class="apidocCodeKeywordSpan">createXOAuthGenerator</span>({
            user: "test.nodemailer@gmail.com",
            token: "1/Gr2OVA2Ol64fNyjZCns-bkRau5eLisbdlEa_HSuTaEk",
            tokenSecret: "ymFpseHtEnrIsuL8Ppbfnnk3"
        })
    }
});
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser" id="apidoc.element.inbox.lineparser">
        function <span class="apidocSignatureSpan">inbox.</span>lineparser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IMAPLineParser(){
    Stream.call(this);
    this.writable = true;

    this._init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox.IMAPClient" id="apidoc.module.inbox.IMAPClient">module inbox.IMAPClient</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.IMAPClient" id="apidoc.element.inbox.IMAPClient.IMAPClient">
        function <span class="apidocSignatureSpan">inbox.</span>IMAPClient
        <span class="apidocSignatureSpan">(port, host, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IMAPClient(port, host, options){
    Stream.call(this);

<span class="apidocCodeCommentSpan">    /**
     * Make this stream writeable. For future reference only, currently not needed
     */
</span>    this.writable = true;

    /**
     * Make this stream readable. Should be on by default though
     */
    this.readable = true;

    /**
     * Options object for this instance
     */
    this.options = options || {};

    /**
     * Port to use for connecting to the server
     */
    this.port = port || (this.options.secureConnection ? 993 : 143);

    /**
     * Server hostname
     */
    this.host = host || "localhost";

    /**
     * If set to true, print traffic between client and server to the console
     */
    this.debug = !!this.options.debug;

    /**
     * XOAuth2 token generator if XOAUTH2 auth is used
     * @private
     */
    this._xoauth2 = false;
    this._xoauth2RetryCount = 0;
    this._xoauth2UntaggedResponse = false;

    if(typeof this.options.auth &amp;&amp; typeof this.options.auth.XOAuth2){
        if(typeof this.options.auth.XOAuth2 == "object" &amp;&amp; typeof this.options.auth.XOAuth2.getToken == "function"){
            this._xoauth2 = this.options.auth.XOAuth2;
        }else if(typeof this.options.auth.XOAuth2 == "object"){
            if(!this.options.auth.XOAuth2.user &amp;&amp; this.options.auth.user){
                this.options.auth.XOAuth2.user = this.options.auth.user;
            }
            this._xoauth2 = xoauth2.createXOAuth2Generator(this.options.auth.XOAuth2);
        }
    }

    this._init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.super_" id="apidoc.element.inbox.IMAPClient.super_">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stream() {
  EE.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox.IMAPClient.prototype" id="apidoc.module.inbox.IMAPClient.prototype">module inbox.IMAPClient.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._checkNewMail" id="apidoc.element.inbox.IMAPClient.prototype._checkNewMail">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_checkNewMail
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_checkNewMail = function (){
    if(isNaN(this._selectedMailbox.UIDNext)){
        return;
    }

    this._send("UID FETCH " + this._selectedMailbox.UIDNext + ":* (UID BODYSTRUCTURE FLAGS ENVELOPE INTERNALDATE" +
      (this._capabilities.indexOf("X-GM-EXT-1") &gt;= 0 ? " X-GM-LABELS X-GM-THRID" : "") +
      (this._capabilities.indexOf("CONDSTORE") &gt;= 0 ? " MODSEQ" : "") +
      ")", (function(){
        this._checkForNewMail = false;
    }).bind(this),
    (function(){
        this._checkForNewMail = true;
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._close" id="apidoc.element.inbox.IMAPClient.prototype._close">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_close = function (){
    if(!this._connection){
        return;
    }

    clearTimeout(this._shouldIdleTimer);
    clearTimeout(this._idleTimer);
    clearTimeout(this._greetingTimeout);

    var socket = this._connection.socket || this._connection;

    if(socket &amp;&amp; !socket.destroyed){
        socket.destroy();
    }

    if(this.debug){
        console.log("Connection to server closed");
    }

    this._connection = false;
    this._commandQueue = [];
    this.emit("close");

    this.removeAllListeners();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._convertFromUTF7" id="apidoc.element.inbox.IMAPClient.prototype._convertFromUTF7">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_convertFromUTF7
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_convertFromUTF7 = function (str){
    return utf7.decode((str || "").toString());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._escapeString" id="apidoc.element.inbox.IMAPClient.prototype._escapeString">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_escapeString
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_escapeString = function (str){
    return "\"" + (str || "").toString().replace(/(["\\])/g, "\\$1").replace(/[\r\n]/g, " ") + "\"";
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if(!callback &amp;&amp; typeof path == "function"){
    callback = path;
    path = undefined;
}

var command = "LIST", suffix = "", wildcard = all ? "*" : "%";

path = this.client.<span class="apidocCodeKeywordSpan">_escapeString</span>(path || (this.path ? this.path + this.delimiter + wildcard
 : wildcard));

if(this.client._capabilities.indexOf("SPECIAL-USE")&gt;=0){
    command = "LIST";
    suffix = " RETURN (SPECIAL-USE)";
}else if(this.client._capabilities.indexOf("XLIST")&gt;=0){
    command = "XLIST";
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._formatEnvelope" id="apidoc.element.inbox.IMAPClient.prototype._formatEnvelope">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_formatEnvelope
        <span class="apidocSignatureSpan">(envelopeData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_formatEnvelope = function (envelopeData){

    if(!Array.isArray(envelopeData)){
        return null;
    }

    var dataObject = {}, lastKey = false, i, len;

    for(i=0, len = envelopeData.length; i&lt;len; i++){
        if(!lastKey){
            lastKey = (envelopeData[i] &amp;&amp; envelopeData[i].value || envelopeData[i] || "").toString();
        }else{
            dataObject[lastKey] = envelopeData[i];
            lastKey = false;
        }
    }

    var message = {
        UIDValidity: this._selectedMailbox.UIDValidity,
        path: this._selectedMailbox.path
    };

    if(dataObject.UID){
        message.UID = Number(dataObject.UID) || 0;
    }

    if(dataObject.FLAGS){
        message.flags = dataObject.FLAGS || [];
    }

    if(dataObject.INTERNALDATE){
        message.internalDate = new Date(dataObject.INTERNALDATE || Date.now());
    }

    if(dataObject["X-GM-THRID"]){
        message.xGMThreadId = dataObject["X-GM-THRID"];
    }

    if(dataObject.MODSEQ){
        message.modSeq = Number(dataObject.MODSEQ);
    }

    if (dataObject["RFC822.HEADER"]){

        var startIndex = dataObject["RFC822.HEADER"].indexOf('References:') + 'References:'.length;
        if (startIndex != -1){
            var endIndex = dataObject["RFC822.HEADER"].indexOf(':', startIndex);
            message.references = dataObject["RFC822.HEADER"].substring(startIndex, endIndex).match(/&lt;(.*?)&gt;+/igm);
        }

        var temp = dataObject["RFC822.HEADER"].match(/(X-Originating-IP:).+?]/igm)
        if (temp){
            message.xOriginatingIP = temp[0].substring('X-Originating-IP:'.length).trim().replace(/(\[|\])/g, '');
        }
    }

    if(dataObject.BODYSTRUCTURE){
        message.bodystructure = this._parseBodystructure(dataObject.BODYSTRUCTURE);
    }

    var messageTypes = [],
        messageTypeMap = {
            "Drafts": "Draft",
            "Flagged": "Starred",
            "Spam": "Junk"
        },
        messageTypePreferenceOrder = ["Sent", "Draft", "Starred", "Junk", "Trash"];

    if(dataObject["X-GM-LABELS"]){
        message.labels = [].concat(dataObject["X-GM-LABELS"] || []);
        message.folders = (dataObject["X-GM-LABELS"] || []).map((function(label){
            var type;

            if(label &amp;&amp; typeof label == "object" &amp;&amp; label.params){
                label = label.params.map((function(localLabel){
                    localLabel = this._convertFromUTF7(localLabel || "");
                    messageTypes.push(localLabel);
                    return localLabel;
                }).bind(this)).join(this._mailboxDelimiter);
            }

            label = this._convertFromUTF7(label || "");

            // trim delimiters
            if(label.charAt(0) == this._mailboxDelimiter){
                label = label.substr(1);
            }
            if(label.charAt(label.length-1) == this._mailboxDelimiter){
                label = label.substr(0, label.length-1);
            }

            if(label.search(this._mailboxDelimiter) &gt; 0){ // ignore the first char
                return label.split(this._mailboxDelimiter).map(function(localLabel){
                    var localType;
                    if((localType = detectMailboxType(localLabel)) != "Normal"){
                        messageTypes.push(localType);
                        return localLabel;
                    }else{
                        return localLabel;
                    }
                });
            }

            // Convert name to canonized version
            if((type = detectMailboxType(label)) != "Normal"){
                // Add flag indicator
                messageTypes.push(type);
                return type;
            }

            // Convert tags to names
            if(label.charAt(0)=="\\" &amp;&amp; label != "\\Important"){
                label = label.substr(1);
                messageTypes.push(label);
            }

            return label;
        }).bind(this));
    }else{
        message.folders = (this._selectedMailbox.path || "").split(this._mailboxDelimiter) || [];
        if(message.folders.length &gt; 1){
            message ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._formatEnvelopeAddress" id="apidoc.element.inbox.IMAPClient.prototype._formatEnvelopeAddress">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_formatEnvelopeAddress
        <span class="apidocSignatureSpan">(address)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_formatEnvelopeAddress = function (address){
    address = [].concat(address || []);
    var name = address[0] ||Ã‚&nbsp;"",
        email = (address[2] || "") + "@" + (address[3] || "");

    if(email == "@"){
        email = "";
    }

    return {
        name: (name || email).replace(/\=\?[^?]+\?[QqBb]\?[^?]*\?=/g,
                function(mimeWord){
                    return mimelib.decodeMimeWord(mimeWord);
                }),
        address: email
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handleGreetingTimeout" id="apidoc.element.inbox.IMAPClient.prototype._handleGreetingTimeout">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handleGreetingTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleGreetingTimeout = function (){
    var error = new Error("Timeout waiting for a greeting");
    error.errorType = "TimeoutError";
    this.emit("error", error);
    this._close();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerGreeting" id="apidoc.element.inbox.IMAPClient.prototype._handlerGreeting">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerGreeting
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerGreeting = function (data){
    clearTimeout(this._greetingTimeout);

    if(!data || !Array.isArray(data)){
        throw new Error("Invalid input");
    }

    if(data[0] != "*" &amp;&amp; data[1] != "OK"){
        var error = new Error("Bad greeting from the server");
        error.errorType = "ProtocolError";
        error.errorLog = this._log.slice(0, this._logLength);
        this.emit("error", error);
        this._close();
        return;
    }

    this._currentState = this.states.PREAUTH;
    this._currentHandler = this._responseRouter;

    this._send("CAPABILITY", this._handlerTaggedCapability.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedCapability" id="apidoc.element.inbox.IMAPClient.prototype._handlerTaggedCapability">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedCapability
        <span class="apidocSignatureSpan">(status)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerTaggedCapability = function (status){
    if(status == "OK"){
        if(!this._secureMode &amp;&amp; this._capabilities.indexOf("STARTTLS")&gt;=0){
            this._send("STARTTLS", this._handlerTaggedStartTLS.bind(this));
            return;
        }

        this._postCapability();
    }else{
        var error = new Error("Invalid capability response");
        error.errorType = "ProtocolError";
        error.errorLog = this._log.slice(0, this._logLength);
        this.emit("error", error);
        this._close();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedCondstore" id="apidoc.element.inbox.IMAPClient.prototype._handlerTaggedCondstore">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedCondstore
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerTaggedCondstore = function (){
    var clientData = {};

    if(this.options.clientId){
        Object.keys(this.options.clientId).forEach((function(key){
            clientData[key] = this.options.clientId[key];
        }).bind(this));
    }

    clientData = Object.keys(clientData).map((function(key){
            return this._escapeString(key) + " " + this._escapeString(clientData[key]);
        }).bind(this)).join(" ");

    if(this._capabilities.indexOf("ID")&gt;=0){
        if(clientData.length){
            this._send("ID (" + clientData + ")", this._handlerTaggedId.bind(this));
        }else{
            this._send("ID NIL", this._handlerTaggedId.bind(this));
        }
    }else{
        this._postReady();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedId" id="apidoc.element.inbox.IMAPClient.prototype._handlerTaggedId">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerTaggedId = function (){
    this._postReady();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedLogin" id="apidoc.element.inbox.IMAPClient.prototype._handlerTaggedLogin">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedLogin
        <span class="apidocSignatureSpan">(status)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerTaggedLogin = function (status){
    if(status == "OK"){
        this._xoauth2RetryCount = 0;
        this._xoauth2UntaggedResponse  = false;
        this._currentState = this.states.AUTH;
        if(!this._updatedCapabilities){
            this._send("CAPABILITY", this._handlerTaggedCapability.bind(this));
        }else{
            this._postAuth();
        }
    }else{
        if(this._xoauth2 &amp;&amp; this._xoauth2UntaggedResponse &amp;&amp; this._xoauth2RetryCount &amp;&amp; this._xoauth2RetryCount &lt; 3){
            this._xoauth2.generateToken((function(err){
                var error;
                if(err){
                    if(typeof err != "object"){
                        error = new Error(err.toString());
                    }else{
                       error = err;
                    }
                    error.errorType = "XOAUTH2Error";
                    error.errorLog = this._log.slice(0, this._logLength);
                    this.emit("error", error);
                    return;
                }
                this._postCapability();
            }).bind(this));
        }else{
            var error = new Error("Authentication failed");
            error.errorType = "AuthenticationError";
            error.errorLog = this._log.slice(0, this._logLength);
            this.emit("error", error);
            this._close();
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedLsub" id="apidoc.element.inbox.IMAPClient.prototype._handlerTaggedLsub">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedLsub
        <span class="apidocSignatureSpan">(xinfo, callback, status)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerTaggedLsub = function (xinfo, callback, status){
    if(status != "OK"){
        if(typeof callback == "function"){
            callback(new Error("Mailbox listing failed"));
        }
        return;
    }

    var curXinfo, curName;

    for(var i=0, len = xinfo.length; i&lt;len; i++){

        curXinfo = xinfo[i];
        curXinfo.tags = curXinfo.tags || [];

        curName = curXinfo.name || "";
        if(curXinfo.tags.indexOf("\\Inbox")&gt;=0){
            curName = "INBOX";
        }

        for(var j=0, jlen = this._mailboxList.length; j&lt;jlen; j++){
            if(curName == this._mailboxList[j].name){

                this._mailboxList[j].name = curXinfo.name || this._mailboxList[j].name || "";
                this._mailboxList[j].tags = curXinfo.tags;

                if(curXinfo.tags.indexOf("\\Noselect")&gt;=0){
                    this._mailboxList[j].disabled = true;
                }

                if(curXinfo.tags.indexOf("\\Inbox")&gt;=0){
                    this._mailboxList[j].type = "Inbox";
                }else if(curXinfo.tags.indexOf("\\All")&gt;=0 || curXinfo.tags.indexOf("\\AllMail")&gt;=0){
                    this._mailboxList[j].type = "All Mail";
                }else if(curXinfo.tags.indexOf("\\Archive")&gt;=0){
                    this._mailboxList[j].type = "Archive";
                }else if(curXinfo.tags.indexOf("\\Drafts")&gt;=0){
                    this._mailboxList[j].type = "Drafts";
                }else if(curXinfo.tags.indexOf("\\Sent")&gt;=0){
                    this._mailboxList[j].type = "Sent";
                }else if(curXinfo.tags.indexOf("\\Junk")&gt;=0 || curXinfo.tags.indexOf("\\Spam")&gt;=0){
                    this._mailboxList[j].type = "Junk";
                }else if(curXinfo.tags.indexOf("\\Flagged")&gt;=0 || curXinfo.tags.indexOf("\\Starred")&gt;=0){
                    this._mailboxList[j].type = "Flagged";
                }else if(curXinfo.tags.indexOf("\\Important")&gt;=0){
                    this._mailboxList[j].type = "Important";
                }else if(curXinfo.tags.indexOf("\\Trash")&gt;=0){
                    this._mailboxList[j].type = "Trash";
                }

                break;
            }
        }
    }

    if(typeof callback == "function"){
        callback(null, this._mailboxList);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    xinfo = xinfo || [];

    this.client._send("LSUB "+this.client._escapeString(this.client._rootPath)+" "+path,
        (function(status){
            if(!this.client._mailboxList.length){
                this.client._mailboxList = [].concat(xinfo);
            }
            this.client.<span class="apidocCodeKeywordSpan">_handlerTaggedLsub</span>(xinfo, callback, status);
        }).bind(this),
        (function(){
            this.client._mailboxList = [];
        }).bind(this));
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedSelect" id="apidoc.element.inbox.IMAPClient.prototype._handlerTaggedSelect">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedSelect
        <span class="apidocSignatureSpan">(callback, status, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerTaggedSelect = function (callback, status, params){
    if(status == "OK"){
        this._currentState = this.states.SELECTED;

        if(Array.isArray(params) &amp;&amp; params[0] &amp;&amp; params[0].params){
            if(params[0].params[0] == "READ-WRITE"){
                this._selectedMailbox.readOnly = false;
            }else if(params[0].params[0] == "READ-ONLY"){
                this._selectedMailbox.readOnly = true;
            }
        }

        clearTimeout(this._shouldIdleTimer);
        clearTimeout(this._idleTimer);
        this._shouldIdleTimer = setTimeout(this.idle.bind(this), this.ENTER_IDLE);

        if(typeof callback == "function"){
            callback(null, this._selectedMailbox);
        }else{
            this.emit("mailbox", this._selectedMailbox);
        }
    }else{
        var error = new Error("Mailbox select failed");
        error.errorType = "MailboxError";
        error.errorLog = this._log.slice(0, this._logLength);
        if(typeof callback == "function"){
            callback(error);
        }else{
            this.emit("error", error);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerTaggedStartTLS" id="apidoc.element.inbox.IMAPClient.prototype._handlerTaggedStartTLS">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerTaggedStartTLS
        <span class="apidocSignatureSpan">(status)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerTaggedStartTLS = function (status){
    if(status == "OK"){
        this._ignoreData = true;
        starttls(this._connection, (function(socket){

            this._connection = socket;
            this._ignoreData = false;
            this._secureMode = true;
            this._connection.on("data", this._onData.bind(this));

            if("setKeepAlive" in this._connection){
                this._connection.setKeepAlive(true);
            }else if(this._connection.socket &amp;&amp; "setKeepAlive" in this._connection.socket){
                this._connection.socket.setKeepAlive(true); // secure connection
            }

            this._send("CAPABILITY", this._handlerTaggedCapability.bind(this));
        }).bind(this));
    }else{
        var error = new Error("Invalid starttls response");
        error.errorType = "TLSError";
        error.errorLog = this._log.slice(0, this._logLength);
        this.emit("error", error);
        this._close();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedCapability" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedCapability">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedCapability
        <span class="apidocSignatureSpan">(list)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedCapability = function (list){
    this._updatedCapabilities = true;
    this._capabilities = list;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedEnabled" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedEnabled">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedEnabled
        <span class="apidocSignatureSpan">(list)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedEnabled = function (list){
    list = [].concat(list || []);

    if(list[0] == "CONDSTORE"){
        this._condstoreEnabled = true;
    }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedFetch" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedFetch">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedFetch
        <span class="apidocSignatureSpan">(list)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedFetch = function (list){
    var envelope = (list || [])[3] || [],
        envelopeData = this._formatEnvelope(envelope),
        nextUID = Number(this._selectedMailbox.UIDNext) || 0,
        currentUID = Number(envelopeData.UID) || 0;

    if(!nextUID || nextUID &lt;= currentUID){
        this._selectedMailbox.UIDNext = currentUID + 1;
    }

    if(this._collectMailList){
        this._mailList.push(envelopeData);
    }

    // emit as new message
    if(nextUID &amp;&amp; nextUID &lt;= currentUID &amp;&amp; this._checkForNewMail){
        this.emit("new", envelopeData);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedId" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedId">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedId
        <span class="apidocSignatureSpan">(list)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedId = function (list){
    list = (list || [])[0] || [];
    var key;
    for(var i=0, len = list.length; i&lt;len; i++){
        if(i % 2 === 0){
            key = list[i];
        }else{
            this._serverId[key] = list[i];
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedIdle" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedIdle">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedIdle
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedIdle = function (){
    this._idleWait = false;
    this.idling = true;
    if(this._shouldCheckOnIdle){
        this._shouldCheckOnIdle = false;
        this._checkNewMail();
    }
    this._processCommandQueue();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedList" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedList">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedList
        <span class="apidocSignatureSpan">(list)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedList = function (list){
    var tags = list.shift() || [],
        delimiter = list.shift() || this._mailboxDelimiter,
        path = (list.shift() || "").substr(this._rootPath.length),
        name = delimiter?path.split(delimiter).pop():path,
        mailbox = {
            name: this._convertFromUTF7(name),
            delimiter: delimiter,
            path: path,
            tags: tags
        };

    this._mailboxDelimiter = delimiter;

    this._mailboxList.push(mailbox);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedLsub" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedLsub">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedLsub
        <span class="apidocSignatureSpan">(list)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedLsub = function (list){
    var tags = list.shift() || [],
        delimiter = list.shift() || this._mailboxDelimiter,
        path = (list.shift() || "").substr(this._rootPath.length),
        name = delimiter?path.split(delimiter).pop():path,
        mailbox = new Mailbox({
            client: this,
            path: path,
            name: this._convertFromUTF7(name),
            delimiter: delimiter
        });

    if(tags.indexOf("\\HasChildren")&gt;=0){
        mailbox.hasChildren = true;
    }

    if(name == "INBOX"){
        mailbox.type="Inbox";
    }

    this._mailboxList.push(mailbox);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedSearch" id="apidoc.element.inbox.IMAPClient.prototype._handlerUntaggedSearch">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_handlerUntaggedSearch
        <span class="apidocSignatureSpan">(list)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handlerUntaggedSearch = function (list){
    if(this._collectMailList){
        this._mailList = this._mailList.concat(list.map(Number));
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._idleTimeout" id="apidoc.element.inbox.IMAPClient.prototype._idleTimeout">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_idleTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_idleTimeout = function (){
    this._send("NOOP", this.idle.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._init" id="apidoc.element.inbox.IMAPClient.prototype._init">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_init = function (){

<span class="apidocCodeCommentSpan">    /**
     * Should the connection be over TLS or NET
     */
</span>    this.options.secureConnection = !!this.options.secureConnection;

    /**
     * Authentication details
     */
    this.options.auth = this.options.auth || {user: "", pass:""};

    /**
     * Connection socket to the server
     */
    this._connection = false;

    /**
     * Is the connection currently in secure mode, changes with STARTTLS
     */
    this._secureMode = !!this.options.secureConnection;

    /**
     * Current protocol state.
     */
    this._currentState = this.states.NONE;

    /**
     * Current stream mode for incoming data
     */
    this._currentMode = this.modes.COMMAND;

    /**
     * Expected remaining data length on stream data mode
     */
    this._expectedDataLength = 0;

    /**
     * Data that was not part of the last command
     */
    this._remainder = "";

    /**
     * Counter for generating unique command tags
     */
    this._tagCounter = 0;

    /**
     * Currently active command
     */
    this._currentRequest = false;

    /**
     * Unprocessed commands
     */
    this._commandQueue = [];

    /**
     * Server capabilities
     */
    this._capabilities = [];

    /**
     * Are the capabilities updated
     */
    this._updatedCapabilities = false;

    /**
     * Currently in idle
     */
    this.idling = false;

    /**
     * Currently "nooping" when idle not available
     */
    this.nooping = false;

    /**
     * Waiting for idle start after issuing IDLE command
     */
    this._idleWait = false;

    /**
     * Waiting for the idle to end
     */
    this._idleEnd = false;

    /**
     * Timer to run NOOP when in idle
     */
    this._idleTimer = false;

    /**
     * Timer for entering idle mode after other commands
     */
    this._shouldIdleTimer = true;

    /**
     * If true check mail before entering idle
     */
    this._shouldCheckOnIdle = false;

    /**
     * Timeout to wait for a successful greeting from the server
     */
    this._greetingTimeout = false;

    /**
     * Server ID
     */
     this._serverId = {};

    /**
     * Should the FETCH responses collected into an array
     */
    this._collectMailList = false;

    /**
     * An array of collected FETCH responses
     */
    this._mailList = [];

    /**
     * If set to true emit FETCH responses as new emails
     */
    this._checkForNewMail = false;

    /**
     * Currently selected mailbox data
     */
    this._selectedMailbox = {};

    /**
     * Currently streaming possible literal values
     */
    this._literalStreaming = false;

    /**
     * Message Stream object for streaming requested messages
     */
    this._messageStream = false;

    /**
     * Literal handler
     */
    this._literalHandler = false;

    /**
     * Personal mailbox root
     */
    this._rootPath = "";

    /**
     * Delimiter for mailbox hierarchy
     */
    this._mailboxDelimiter = "/";

    /**
     * Default INBOX name
     */
    this._inboxName = "INBOX";

    /**
     * Default Sent folder name
     */
    this._outgoingName = this.options.outgoingName || "";

    /**
     * Active mailbox list
     */
    this._mailboxList = [];

    /**
     * Is CONDSTORE enabled or not
     */
    this._condstoreEnabled = false;

    /**
     * Ignore all incoming data while in TLS negotiations
     */
    this._ignoreData = false;

    /**
     * Keep IMAP log for error trace
     */
    this._log = [];

    /**
     * IMAP log length in lines
     */
    this._logLength = 10;

    /**
     * Root mailbox
     */
    this._rootMailbox = new Mailbox({client: this});

    /**
     * Lineparser object to feed the incoming data to
     */
    this.lineparser = new IMAPLineParser();

    /**
     * Initially send the incoming data to greeting handler
     */
    this._currentHandler = this._handlerGreeting;

    this.lineparser.on("line", this._onServerResponse.bind(this));
    this.lineparser.on("log", this._onServerLog.bind(this, "S"));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @constructor
 */
function IMAPLineParser(){
    Stream.call(this);
    this.writable = true;

    this.<span class="apidocCodeKeywordSpan">_init</span>();
}
utillib.inherits(IMAPLineParser, Stream);

/**
 * Possible states the parser can be in (Finite State Machine)
 */
IMAPLineParser.prototype.states = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._onClose" id="apidoc.element.inbox.IMAPClient.prototype._onClose">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onClose
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onClose = function (){
    if(this.debug){
        console.log("EVENT: CLOSE");
    }

    this._close();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._onConnect" id="apidoc.element.inbox.IMAPClient.prototype._onConnect">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onConnect = function (){

    if(this.debug){
        console.log("Connection to server opened");
    }

    if("setKeepAlive" in this._connection){
        this._connection.setKeepAlive(true);
    }else if(this._connection.socket &amp;&amp; "setKeepAlive" in this._connection.socket){
        this._connection.socket.setKeepAlive(true); // secure connection
    }

    this._connection.on("data", this._onData.bind(this));
    this._connection.on("close", this._onClose.bind(this));
    this._connection.on("end", this._onEnd.bind(this));

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._onData" id="apidoc.element.inbox.IMAPClient.prototype._onData">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onData
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onData = function (chunk){
    if(this._ignoreData){
        // TLS negotiations going on, ignore everything received
        return;
    }

    var data = chunk &amp;&amp; chunk.toString("binary") || "",
        line, match;

    if(this._remainder){
        data = this._remainder + data;
        this._remainder = "";
    }

    if(this._currentMode == this.modes.DATA){
        if(this._expectedDataLength &lt;= data.length){

            if(this._expectedDataLength){

                if(!this._literalStreaming){
                    this.lineparser.writeLiteral(data.substr(0, this._expectedDataLength));
                }else{
                    this._messageStream.emit("data", new Buffer(data.substr(0, this._expectedDataLength), "binary"));
                }

                this._remainder = data.substr(this._expectedDataLength);
                this._expectedDataLength = 0;
            }else{
                this._remainder = data;
            }

            this._currentMode = this.modes.COMMAND;

            return this._onData(); // rerun with the remainder
        }else{

            if(!this._literalStreaming){
                this.lineparser.writeLiteral(data);
            }else{
                this._messageStream.emit("data", new Buffer(data, "binary"));
            }

            this._expectedDataLength -= data.length;
            return;
        }
    }

    if(this._currentMode == this.modes.COMMAND){
        if((match = data.match(/\r?\n/))){ // find the line ending
            line = data.substr(0, match.index);
            this._remainder = data.substr(match.index + match[0].length) || "";

            if(this.debug){
                console.log("SERVER: "+line);
            }

            // check if the line ends with a literal notion
            if((match = line.match(/\{(\d+)\}\s*$/))){
                this._expectedDataLength = Number(match[1]);
                this.lineparser.write(line);

                this._currentMode = this.modes.DATA;

                if(this._literalStreaming){
                    this.lineparser.writeLiteral(""); // create empty literal object
                }
            }else{
                this.lineparser.end(line);
            }

            if(this._remainder){
                return this._onData(); // rerun with the remainder
            }
        }else{
            this._remainder = data; // keep it for later
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._onEnd" id="apidoc.element.inbox.IMAPClient.prototype._onEnd">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onEnd
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onEnd = function (){
    this.emit("end");

    if(this.debug){
        console.log("EVENT: END");
    }

    this._close();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._onError" id="apidoc.element.inbox.IMAPClient.prototype._onError">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onError
        <span class="apidocSignatureSpan">(error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onError = function (error){
    this.emit("error", error);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._onServerLog" id="apidoc.element.inbox.IMAPClient.prototype._onServerLog">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onServerLog
        <span class="apidocSignatureSpan">(type, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onServerLog = function (type, data){
    this._log.unshift((type?type + ": " :"") + (data || "").toString().trim());
    if(this._log.length &gt; this._logLength){
        this._log.pop();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._onServerResponse" id="apidoc.element.inbox.IMAPClient.prototype._onServerResponse">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_onServerResponse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onServerResponse = function (data){
    this._currentHandler(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._parseBodystructure" id="apidoc.element.inbox.IMAPClient.prototype._parseBodystructure">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_parseBodystructure
        <span class="apidocSignatureSpan">(bs, parentBodypart)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseBodystructure = function (bs, parentBodypart) {
    var self = this;

    if (typeof bs === 'string') {
        // type information for multipart/alternative or multipart/mixed
        return 'multipart/' + bs.toLowerCase();
    }

    if (!Array.isArray(bs)) {
        // if it is not the information on which type of multipart/*
        // we've got here, or an array containing valuable information,
        // it is just imap noise
        return;
    }

    if (!Array.isArray(bs[0]) &amp;&amp; typeof bs[0] === 'string' &amp;&amp; bs.length &gt;= 10) {
        // we've got a single part, usually a text/plain, text/html or attachment part
        var dispositionIndex = 8,
            currentPart = {}, type, subtype;

        currentPart.part = parentBodypart || '1';
        type = bs[0].toLowerCase();
        subtype = bs[1].toLowerCase();
        currentPart.type = type + '/' + subtype;
        currentPart.parameters = {};
        if (bs[2]) {
            // the parameters are a key/value list
            var parametersIndex = 0;
            while(parametersIndex &lt; bs[2].length) {
                currentPart.parameters[bs[2][parametersIndex].toLowerCase()] = bs[2][parametersIndex + 1].toLowerCase();
                parametersIndex += 2;
            }
        }
        currentPart.encoding = bs[5].toLowerCase();
        currentPart.size = parseInt(bs[6], 10);

        if (type === 'message' &amp;&amp; subtype === 'rfc822') {
            // parsing of envelope and body structure information for message/rfc882 mails is not supported,
            // because there are IMAP servers which violate rfc 3501 for message/rfc882, for example gmail.
            return currentPart;
        }

        if (type === 'text') {
            // text/* body parts have an additional field for the body size in lines in its content transfer encoding.
            currentPart.lines = parseInt(bs[7], 10);
            dispositionIndex = 9;
        }

        if (bs[dispositionIndex]) {
            currentPart.disposition = [];
            if (Array.isArray(bs[dispositionIndex][0])) {
                bs[dispositionIndex].forEach(function(rawAttachment){
                    if (!rawAttachment) {
                        return;
                    }

                    currentPart.disposition.push(parseAttachment(rawAttachment));
                });
            } else {
                currentPart.disposition.push(parseAttachment(bs[dispositionIndex]));
            }
        }

        return currentPart;
    }

    if (Array.isArray(bs[0])) {
        // we have got a multipart/* message
        var bodypartsCounter = 1, parsedBodystructure = {},
            parsedPart, partIdentifier;

        bs.forEach(function(rawPart) {
            partIdentifier = (parentBodypart ? (parentBodypart + '.') : '') + bodypartsCounter;
            parsedPart = self._parseBodystructure(rawPart, partIdentifier);
            if (typeof parsedPart === 'string') {
                parsedBodystructure.type = parsedPart;
            } else if (typeof parsedPart === 'object') {
                parsedBodystructure[bodypartsCounter] = parsedPart;
                bodypartsCounter++;
            }
        });

        return parsedBodystructure;
    }

    // helper function to parse attachments
    function parseAttachment(rawAttachment) {
        var parsedAttachment = {};

        parsedAttachment.type = rawAttachment[0].toLowerCase();
        if (rawAttachment[1]) {
            // attachment filename, not present in inline attachments
            parsedAttachment[rawAttachment[1][0].toLowerCase()] = rawAttachment[1][1];
        }

        return parsedAttachment;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._postAuth" id="apidoc.element.inbox.IMAPClient.prototype._postAuth">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_postAuth
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_postAuth = function (){
    if(this._capabilities.indexOf("CONDSTORE")&gt;=0){
        this._send("ENABLE CONDSTORE", this._handlerTaggedCondstore.bind(this));
    }else{
        this._handlerTaggedCondstore("OK");
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._postCapability" id="apidoc.element.inbox.IMAPClient.prototype._postCapability">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_postCapability
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_postCapability = function (){
    if(this._currentState == this.states.PREAUTH){
        this._updatedCapabilities = false;

        if(this._capabilities.indexOf("AUTH=XOAUTH2")&gt;=0 &amp;&amp; this._xoauth2){
            this._xoauth2.getToken((function(err, token){
                var error;

                if(err){
                    if(typeof err != "object"){
                        error = new Error(err.toString());
                    }else{
                       error = err;
                    }
                    error.errorType = "AuthenticationError";
                    error.errorLog = this._log.slice(0, this._logLength);
                    this.emit("error", error);
                    return;
                }
                this._send("AUTHENTICATE XOAUTH2 " + token,
                     this._handlerTaggedLogin.bind(this), (function(){
                        this._xoauth2UntaggedResponse = false;
                        this._literalHandler = (function(message){

                            this._xoauth2UntaggedResponse = true;

                            message = (Array.isArray(message) &amp;&amp; message[0] || message || "").toString().trim();
                            var data;
                            try{
                                data = JSON.parse(new Buffer(message, "base64").toString("utf-8"));
                            }catch(E){
                                data = {
                                    status: 500,
                                    error: E.message
                                };
                            }

                            if(['400', '401'].indexOf((data.status || "").toString().trim())&gt;=0){
                                this._xoauth2RetryCount = (this._xoauth2RetryCount || 0) + 1;
                            }

                            this._connection.write("\r\n");
                            if(this.debug){
                                console.log("CLIENT:");
                            }
                        }).bind(this);
                     }).bind(this));
            }).bind(this));
        }else if(this._capabilities.indexOf("AUTH=XOAUTH")&gt;=0 &amp;&amp; this.options.auth.XOAuthToken){
            if(typeof this.options.auth.XOAuthToken == "object"){
                this._send("AUTHENTICATE XOAUTH " + this.options.auth.XOAuthToken.generate(),
                     this._handlerTaggedLogin.bind(this));
            }else{
                this._send("AUTHENTICATE XOAUTH "+(this.options.auth.XOAuthToken || "").toString(),
                     this._handlerTaggedLogin.bind(this));
            }
        }else{
            this._send("LOGIN "+this._escapeString(this.options.auth.user)+" "+
                this._escapeString(this.options.auth.pass), this._handlerTaggedLogin.bind(this));
        }
    }else if(this._currentState == this.states.AUTH){
        this._postAuth();
    }else{
        throw new Error("Unhandled event state");
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._postReady" id="apidoc.element.inbox.IMAPClient.prototype._postReady">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_postReady
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_postReady = function (err){
    if(err){
        this.emit("error", err);
    }else{
        this.emit("connect");
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._processCommandQueue" id="apidoc.element.inbox.IMAPClient.prototype._processCommandQueue">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_processCommandQueue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_processCommandQueue = function (){

    if(!this._commandQueue.length || !this._connection){
        return;
    }

    // If the client is currently on idle, stop it
    clearTimeout(this._shouldIdleTimer);
    clearTimeout(this._idleTimer);
    if(this._idleWait || this.idling){
        if(!this._idleWait &amp;&amp; this.idling &amp;&amp; !this._idleEnd){
            if(this.debug){
                console.log("CLIENT: DONE");
            }
            this._onServerLog("C", "DONE");
            this._connection.write("DONE\r\n");
            this._idleEnd = true;
        }
        setTimeout(this._processCommandQueue.bind(this), 100);
        return;
    }

    var command = this._commandQueue.shift();

    if(typeof command.prewrite == "function"){
        command.prewrite();
    }

    this._onServerLog("C", command.data);
    this._connection.write(command.data);

    if(this.debug){
        console.log("CLIENT: "+ (command.data || "").trim());
    }

    this._currentRequest = {
        tag: command.tag,
        callback: (function(status, params){

            clearTimeout(this._shouldIdleTimer);
            clearTimeout(this._idleTimer);
            if(!this.idling &amp;&amp; !this._idleWait &amp;&amp; this._currentState == this.states.SELECTED){
                this._shouldIdleTimer = setTimeout(this.idle.bind(this), this.ENTER_IDLE);
            }

            if(typeof command.callback == "function"){
                command.callback(status, params);
            }
            this._currentRequest = false;

            this._processCommandQueue();
        }).bind(this)
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._responseRouter" id="apidoc.element.inbox.IMAPClient.prototype._responseRouter">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_responseRouter
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_responseRouter = function (data){
    if(!data || !Array.isArray(data)){
        return;
    }

    // Handle tagged commands
    if(this._currentRequest &amp;&amp; this._currentRequest.tag == data[0]){
        this._currentRequest.callback(data[1], data.slice(2));
        return;
    }

    // handle commands tagged with +
    if(data[0]=="+"){
        if(this._idleWait){
            this._handlerUntaggedIdle();
        }

        if(this._literalHandler){
            this._literalHandler(data.slice(1));
        }
    }else if(this._literalHandler){
        this._literalHandler = null;
    }

    // handle untagged commands (tagged with *)
    if(data[0]=="*"){
        switch(data[1]){
            case "CAPABILITY":
                this._handlerUntaggedCapability(data.slice(2));
                return;
            case "ID":
                this._handlerUntaggedId(data.slice(2));
                return;
            case "ENABLED":
                this._handlerUntaggedEnabled(data.slice(2));
                return;
            case "FLAGS":
                this._selectedMailbox.flags = data[2] || [];
                return;
            case "SEARCH":
                this._handlerUntaggedSearch(data.slice(2));
                return;
            case "XLIST":
            case "LIST":
                this._handlerUntaggedList(data.slice(2));
                return;
            case "LSUB":
                this._handlerUntaggedLsub(data.slice(2));
                return;
            case "OK":
                if(typeof data[2] == "object"){
                    if(Array.isArray(data[2].params)){
                        if(data[2].params[0] == "UIDVALIDITY"){
                            this._selectedMailbox.UIDValidity = data[2].params[1];
                            return;
                        }else if(data[2].params[0] == "UIDNEXT"){
                            this._selectedMailbox.UIDNext = data[2].params[1];
                            return;
                        }else if(data[2].params[0] == "HIGHESTMODSEQ"){
                            this._selectedMailbox.highestModSeq = Number(data[2].params[1]);
                            return;
                        }else if(data[2].params[0] == "UNSEEN"){
                            this._selectedMailbox.unseen = data[2].params[1];
                            return;
                        }else if(data[2].params[0] == "PERMANENTFLAGS"){
                            this._selectedMailbox.permanentFlags = data[2].params[1] || [];
                            return;
                        }
                    }
                }
                return;
        }

        if(!isNaN(data[1]) &amp;&amp; data[2] == "FETCH"){
            this._handlerUntaggedFetch(data);
            return;
        }

        if(!isNaN(data[1]) &amp;&amp; data[2] == "EXPUNGE"){
            if(this._selectedMailbox.count){
                this._selectedMailbox.count--;
            }
        }

        if(!isNaN(data[1]) &amp;&amp; data[2] == "EXISTS"){
            if(this._selectedMailbox.count != Number(data[1])){
                this._selectedMailbox.count = Number(data[1]) || this._selectedMailbox.count || 0;
                if(this.idling || this.nooping){
                    this._checkNewMail();
                }
            }
            return;
        }

    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype._send" id="apidoc.element.inbox.IMAPClient.prototype._send">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>_send
        <span class="apidocSignatureSpan">(data, callback, prewrite)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_send = function (data, callback, prewrite){
    data = (data || "").toString();
    var tag = "A" + (++this._tagCounter);

    this._commandQueue.push({tag: tag, data: tag + " " + data + "\r\n", callback: callback, prewrite: prewrite});

    if(this.idling || !this._currentRequest){
        this._processCommandQueue();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if(this.client._capabilities.indexOf("SPECIAL-USE")&gt;=0){
    command = "LIST";
    suffix = " RETURN (SPECIAL-USE)";
}else if(this.client._capabilities.indexOf("XLIST")&gt;=0){
    command = "XLIST";
}

this.client.<span class="apidocCodeKeywordSpan">_send</span>(command+" "+this.client._escapeString(this.client._rootPath
) + " " + path + suffix,
    (function(){
        this.listSubscribed(path, this.client._mailboxList, callback);
    }).bind(this),
    (function(){
        this.client._mailboxList = [];
    }).bind(this));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.addFlags" id="apidoc.element.inbox.IMAPClient.prototype.addFlags">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>addFlags
        <span class="apidocSignatureSpan">(uid, flags, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addFlags = function (uid, flags, callback){
    flags = [].concat(flags || []);
    this.updateFlags(uid, flags, "+", callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
query = {unseen: true, not: {seen: true}}
```

Returned list is already sorted and all values are numbers.

### Message flags

You can add and remove message flags like `\Seen` or `\Answered` with `client.<span class="apidocCodeKeywordSpan">addFlags</span>()` and `client.removeFlags()`

**List flags**
```javascript
client.fetchFlags(uid, callback)
```

Where
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.addLabels" id="apidoc.element.inbox.IMAPClient.prototype.addLabels">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>addLabels
        <span class="apidocSignatureSpan">(uid, labels, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addLabels = function (uid, labels, callback){
    labels = [].concat(labels || []);
    this.updateLabels(uid, labels, "+", callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.close" id="apidoc.element.inbox.IMAPClient.prototype.close">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function (){
    this._send("LOGOUT", (function (){
        this._close();
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

### Logout and disconnect

Logout from IMAP and close NET connection.

```javascript
client.<span class="apidocCodeKeywordSpan">close</span>();
client.on('close', function (){
    console.log('DISCONNECTED!');
});
```

### List available mailboxes
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.connect" id="apidoc.element.inbox.IMAPClient.prototype.connect">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>connect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (){

    if(this.options.secureConnection){
        this._connection = tls.connect(this.port, this.host, {rejectUnauthorized: false}, this._onConnect.bind(this));
    }else{
        this._connection = net.connect(this.port, this.host);
        this._connection.on("connect", this._onConnect.bind(this));
    }

    this._connection.on("error", this._onError.bind(this));

    this._greetingTimeout = setTimeout(this._handleGreetingTimeout.bind(this), this.GREETING_TIMEOUT);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        })
    }
});
```

Once the connection object has been created, use connect() to create the actual connection.
```javascript
client.<span class="apidocCodeKeywordSpan">connect</span>();
```

When the connection has been successfully established a 'connect' event is emitted.
```javascript
client.on("connect", function(){
    console.log("Successfully connected to server");
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.copyMessage" id="apidoc.element.inbox.IMAPClient.prototype.copyMessage">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>copyMessage
        <span class="apidocSignatureSpan">(uid, destination, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copyMessage = function (uid, destination, callback){
    uid = Number(uid) || 0;

    if(!uid){
        if(typeof callback == "function"){
            callback(new Error("Invalid UID value"));
        }
        return;
    }

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    this._send("UID COPY " + uid + " " + this._escapeString(destination), (function(status){
        if(status != "OK"){
            return callback(new Error("Error copying message"));
        }
        return callback(null, true);
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

When adding a message to the mailbox, the new message event is also raised after
the mail has been stored.

### Copy a message

You can copy a message from the current mailbox to a selected one with `client.<span class="apidocCodeKeywordSpan">copyMessage<!--
span-->()`
```javascript
client.copyMessage(uid, destination, callback)
```

Where

* **uid** is the message identifier.
...</span></pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.createMailbox" id="apidoc.element.inbox.IMAPClient.prototype.createMailbox">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>createMailbox
        <span class="apidocSignatureSpan">(path, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createMailbox = function (path, callback){
    this._rootMailbox.createChild(path, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            }
        })
    });
    */

    //client.listChildren(console.log)

    client.<span class="apidocCodeKeywordSpan">createMailbox</span>('test/foobar', function (err, mailbox) {
        console.log(err, mailbox);
        client.deleteMailbox('test/foobar', console.log);
    });

});

// on new messages, print to console
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.createMessageStream" id="apidoc.element.inbox.IMAPClient.prototype.createMessageStream">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>createMessageStream
        <span class="apidocSignatureSpan">(uid)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createMessageStream = function (uid){
    var stream = new Stream();

    uid = Number(uid) || 0;

    if(!uid){
        process.nextTick(this.emit.bind(this, new Error("Invalid UID value")));
        return;
    }

    if(this._currentState != this.states.SELECTED){
        process.nextTick(this.emit.bind(this, new Error("No inbox selected")));
        return;
    }

    this._send("UID FETCH " + uid + " BODY.PEEK[]", (function(status){
        this._collectMailList = false;
        this._literalStreaming = false;

        if(!this._mailList.length){
            if(status == "OK"){
                stream.emit("error", new Error("Selected message not found: "+uid+"; "+this.port+"; "+this.host+"; "+JSON.stringify
(this._selectedMailbox)));
            }else{
                stream.emit("error", new Error("Error fetching message: "+uid+"; "+this.port+"; "+this.host+"; "+JSON.stringify(
this._selectedMailbox)));
            }
        }

        this._messageStream.emit("end");
        this._messageStream.removeAllListeners();

        this._messageStream = null;

    }).bind(this),
    (function(){
        this._collectMailList = true;
        this._literalStreaming = true;
        this._mailList = [];
        this._messageStream = stream;
    }).bind(this));

    return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

### Fetch message contents

Message listing only retrieves the envelope part of the message. To get the full RFC822 message body
you need to fetch the message.
```javascript
var messageStream = client.<span class="apidocCodeKeywordSpan">createMessageStream</span>(uid)
```

Where

  * **uid** is the UID value for the mail

Example (output message contents to console)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.deleteMailbox" id="apidoc.element.inbox.IMAPClient.prototype.deleteMailbox">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>deleteMailbox
        <span class="apidocSignatureSpan">(path, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteMailbox = function (path, callback){
    this._rootMailbox.deleteChild(path, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
    */

    //client.listChildren(console.log)

    client.createMailbox('test/foobar', function (err, mailbox) {
        console.log(err, mailbox);
        client.<span class="apidocCodeKeywordSpan">deleteMailbox</span>('test/foobar', console.log);
    });

});

// on new messages, print to console
client.on("new", function(message){
    console.log("New message:");
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.deleteMessage" id="apidoc.element.inbox.IMAPClient.prototype.deleteMessage">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>deleteMessage
        <span class="apidocSignatureSpan">(uid, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deleteMessage = function (uid, callback){
    uid = Number(uid) || 0;

    if(!uid){
        if(typeof callback == "function"){
            callback(new Error("Invalid UID value"));
        }
        return;
    }

    this.addFlags(uid, "\\Deleted", (function(error){
        if(error){
            return callback(error);
        }

        this._send("EXPUNGE", (function(status){
            if(status != "OK"){
                return callback(new Error("Error removing message"));
            }
            return callback(null, true);
        }).bind(this));

    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
client.moveMessage(123, "[GMail]/Junk", function(err){
  console.log(err || "success, moved to junk");
});
```

### Delete a message

You can delete a message from current mailbox with `client.<span class="apidocCodeKeywordSpan">deleteMessage</span>()`
```javascript
client.deleteMessage(uid, callback)
```

Where

* **uid** is the message identifier.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.fetchData" id="apidoc.element.inbox.IMAPClient.prototype.fetchData">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>fetchData
        <span class="apidocSignatureSpan">(uid, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fetchData = function (uid, callback){
    uid = Number(uid) || 0;

    if(!uid){
        if(typeof callback == "function"){
            callback(new Error("Invalid UID value"));
        }
        return;
    }

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    this._send("UID FETCH " + uid + " (UID FLAGS ENVELOPE RFC822.HEADER" +
      (this._capabilities.indexOf("X-GM-EXT-1")&gt;=0?" X-GM-LABELS X-GM-THRID":"") +
      (this._capabilities.indexOf("CONDSTORE") &gt;= 0 ? " MODSEQ" : "") +
      ")", (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(typeof callback == "function"){
            if(status == "OK"){
                if(!this._mailList.length){
                    callback(null, null);
                }else{
                    callback(null, this._mailList[0]);
                }
            }else{
                callback(new Error("Error fetching message data"));
            }
        }

    }).bind(this),
    (function(){
        this._collectMailList = true;
        this._mailList = [];
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
]
```

### Fetch message details

To fetch message data (flags, title, etc) for a specific message, use
```javascript
client.<span class="apidocCodeKeywordSpan">fetchData</span>(uid, callback)
```

Where

* **uid** is the UID value for the mail
* **callback** *(error, message)* is the callback function to with the message data object (or null if the message was not found
). Gets an error parameter if error occured
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.fetchFlags" id="apidoc.element.inbox.IMAPClient.prototype.fetchFlags">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>fetchFlags
        <span class="apidocSignatureSpan">(uid, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fetchFlags = function (uid, callback){
    uid = Number(uid) || 0;

    if(!uid){
        if(typeof callback == "function"){
            callback(new Error("Invalid UID value"));
        }
        return;
    }

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    this._send("UID FETCH " + uid + " (UID FLAGS)", (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(typeof callback == "function"){
            if(status == "OK"){
                if(!this._mailList.length){
                    callback(null, null);
                }else{
                    callback(null, this._mailList[0].flags || []);
                }
            }else{
                callback(new Error("Error fetching message flags"));
            }
        }

    }).bind(this),
    (function(){
        this._collectMailList = true;
        this._mailList = [];
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Message flags

You can add and remove message flags like `\Seen` or `\Answered` with `client.addFlags()` and `client.removeFlags()`

**List flags**
```javascript
client.<span class="apidocCodeKeywordSpan">fetchFlags</span>(uid, callback)
```

Where

* **uid** is the message identifier
* **callback** *(error, flags)* is the callback to run, gets message flags array as a parameter
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.getCurrentMailbox" id="apidoc.element.inbox.IMAPClient.prototype.getCurrentMailbox">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>getCurrentMailbox
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getCurrentMailbox = function (){
    return this._selectedMailbox;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.getMailbox" id="apidoc.element.inbox.IMAPClient.prototype.getMailbox">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>getMailbox
        <span class="apidocSignatureSpan">(path, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMailbox = function (path, callback){
    this._rootMailbox.listChildren(path, function(error, mailboxes){
        if(error){
            callback(error);
        }else if(mailboxes &amp;&amp; mailboxes.length){
            callback(null, mailboxes[0]);
        }else{
            callback(null, null);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

### Fetch a specified mailbox object

If you need to access a specific mailbox object (for creating or listing child
mailboxes etc.), you can do it with
```javascript
client.<span class="apidocCodeKeywordSpan">getMailbox</span>(path, callback)
```

Where

* **path** is the mailbox directory path
* **callback** *(error, mailbox)* is the callback function
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.idle" id="apidoc.element.inbox.IMAPClient.prototype.idle">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>idle
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">idle = function (){
    if(this._capabilities.indexOf("IDLE")&gt;=0){
        this._send("IDLE", (function(){
            this.idling = false;
            this._idleEnd = false;
        }).bind(this), (function(){
            this._idleWait = true;
            this._idleEnd = false;
            this._idleTimer = setTimeout(this._idleTimeout.bind(this), this.IDLE_TIMEOUT);
        }).bind(this));
    }else{
        if(this.debug){
            console.log("WARNING: Server does not support IDLE, fallback to NOOP");
        }
        this._idleTimer = setTimeout((function(){
            this._send("NOOP", (function(){
                this.nooping = false;
            }).bind(this), (function(){
                this.nooping = true;
            }).bind(this));
        }).bind(this), this.IDLE_TIMEOUT);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.listFlags" id="apidoc.element.inbox.IMAPClient.prototype.listFlags">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listFlags
        <span class="apidocSignatureSpan">(from, limit, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listFlags = function (from, limit, callback){
    var to;

    from = Number(from) || 0;

    if(typeof limit == "function" &amp;&amp; !callback){
        callback = limit;
        limit = undefined;
    }

    limit = Number(limit) || 0;

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    if(from &lt; 0){
        from = this._selectedMailbox.count + from;
    }

    if(from &lt; 0){
        from = 0;
    }

    if(limit){
        to = from + limit;
    }else{
        to = "*";
    }

    from++;

    this._collectMailList = true;
    this._mailList = [];
    this._send("FETCH " + from + ":" + to + " (UID FLAGS)", (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(status == "OK"){
            callback(null, this._mailList);
        }else{
            callback(new Error("Error fetching list"));
        }
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* **lastUID** is the UID value to end listing with, can be a number or "*"
* **callback** is the same as with `listMessage`

### Listing flags

As a shorthand listing, you can also list only UID and Flags pairs
```javascript
client.<span class="apidocCodeKeywordSpan">listFlags</span>(from[, limit], callback)
```

Where

* **from** is the index of the first message (0 based), you can use negative numbers to count from the end (-10 indicates the 10
 last messages)
* **limit** defines the maximum count of messages to fetch, if not set or 0 all messages from the starting position will be included
* **callback** *(error, messages)* is the callback function to run with the message array
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.listMailboxes" id="apidoc.element.inbox.IMAPClient.prototype.listMailboxes">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listMailboxes
        <span class="apidocSignatureSpan">(path, all, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listMailboxes = function (path, all, callback){
    this._rootMailbox.listChildren(path, all, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
```

### List available mailboxes

To list the available mailboxes use
```javascript
client.<span class="apidocCodeKeywordSpan">listMailboxes</span>(callback)
```

Where

  * **callback** *(error, mailboxes)* returns a list of root mailbox object

Mailbox objects have the following properties
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.listMessages" id="apidoc.element.inbox.IMAPClient.prototype.listMessages">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listMessages
        <span class="apidocSignatureSpan">(from, limit, extendedOptions, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listMessages = function (from, limit, extendedOptions, callback){
    var to;

    from = Number(from) || 0;

    if(typeof extendedOptions == "function" &amp;&amp; !callback){
        callback = extendedOptions;
        extendedOptions = undefined;
    }

    if(typeof limit == "function" &amp;&amp; !callback){
        callback = limit;
        limit = undefined;
    }

    extendedOptions = extendedOptions || "";
    limit = Number(limit) || 0;

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    // Nothing to retrieve
    if(!this._selectedMailbox.count){
        return callback(null, []);
    }

    if(from &lt; 0){
        from = this._selectedMailbox.count + from;
    }

    if(from &lt; 0){
        from = 0;
    }

    if(limit){
        to = from + limit;
    }else{
        to = "*";
    }

    from++;

    this._collectMailList = true;
    this._mailList = [];

    this._send(
      "FETCH " + from + ":" + to +
      " (UID BODYSTRUCTURE FLAGS ENVELOPE INTERNALDATE RFC822.HEADER" +
      (this._capabilities.indexOf("X-GM-EXT-1")&gt;=0?" X-GM-LABELS X-GM-THRID":"") +
      (this._capabilities.indexOf("CONDSTORE") &gt;= 0 ? " MODSEQ" : "") +
      ")" +
      (extendedOptions ? " "+extendedOptions : ""), (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(status == "OK"){
            callback(null, this._mailList);
        }else{
            callback(new Error("Error fetching list"));
        }
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
```

### Listing e-mails

Once a mailbox has been opened you can list contained e-mails with
```javascript
client.<span class="apidocCodeKeywordSpan">listMessages</span>(from[, limit], callback)
```

Where

* **from** is the index of the first message (0 based), you can use negative numbers to count from the end (-10 indicates the 10
 last messages)
* **limit** defines the maximum count of messages to fetch, if not set or 0 all messages from the starting position will be included
* **callback** *(error, messages)* is the callback function to run with the message array
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.listMessagesByUID" id="apidoc.element.inbox.IMAPClient.prototype.listMessagesByUID">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>listMessagesByUID
        <span class="apidocSignatureSpan">(from, to, extendedOptions, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listMessagesByUID = function (from, to, extendedOptions, callback){
    from = Number(from) || 0;

    if(typeof extendedOptions == "function" &amp;&amp; !callback){
        callback = extendedOptions;
        extendedOptions = undefined;
    }

    if(typeof to == "function" &amp;&amp; !callback){
        callback = to;
        to = undefined;
    }

    extendedOptions = extendedOptions || "";
    to = Number(to) || "*";

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    // Nothing to retrieve
    if(!this._selectedMailbox.count){
        return callback(null, []);
    }

    this._collectMailList = true;
    this._mailList = [];

    this._send(
      "UID FETCH " + from + ":" + to +
      " (UID BODYSTRUCTURE FLAGS ENVELOPE INTERNALDATE RFC822.HEADER" +
      (this._capabilities.indexOf("X-GM-EXT-1")&gt;=0?" X-GM-LABELS X-GM-THRID":"") +
      (this._capabilities.indexOf("CONDSTORE") &gt;= 0 ? " MODSEQ" : "") +
      ")" +
      (extendedOptions ? " "+extendedOptions : ""), (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(status == "OK"){
            callback(null, this._mailList);
        }else{
            callback(new Error("Error fetching list"));
        }
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
there is no "cc" field in the message object.

### Listing messages by UID

You can list messages by UID with

```javascript
client.<span class="apidocCodeKeywordSpan">listMessagesByUID</span>(firstUID, lastUID, callback)
```

Where

* **firstUI** is the UID value to start listing from
* **lastUID** is the UID value to end listing with, can be a number or "*"
* **callback** is the same as with `listMessage`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.moveMessage" id="apidoc.element.inbox.IMAPClient.prototype.moveMessage">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>moveMessage
        <span class="apidocSignatureSpan">(uid, destination, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">moveMessage = function (uid, destination, callback){
    this.copyMessage(uid, destination, (function(error){
        if(error){
            return callback(error);
        }
        this.deleteMessage(uid, function(error){
            // we don't really care if the removal succeeded or not at this point
            return callback(null, !error);
        });
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
client.copyMessage(123, "[GMail]/Junk", function(err){
  console.log(err || "success, copied to junk");
});
```

### Move a message

You can move a message from current mailbox to a selected one with `client.<span class="apidocCodeKeywordSpan">moveMessage</span>()`
```javascript
client.moveMessage(uid, destination, callback)
```

Where

* **uid** is the message identifier.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.openMailbox" id="apidoc.element.inbox.IMAPClient.prototype.openMailbox">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>openMailbox
        <span class="apidocSignatureSpan">(path, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">openMailbox = function (path, options, callback){
    var command = "SELECT";

    if(typeof options == "function" &amp;&amp; !callback){
        callback = options;
        options = undefined;
    }

    options = options || {};

    if(options.readOnly){
        command = "EXAMINE";
    }

    if(typeof path == "object"){
        path = path.path;
    }

    if(!path){
        return callback(new Error("Invalid or missing mailbox path provided"));
    }

    this._selectedMailbox = {
        path: path
    };

    this._send(command + " " + this._escapeString(path)+(
        this._condstoreEnabled?" (CONDSTORE)":""
      ), this._handlerTaggedSelect.bind(this, callback));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
```

### Select a mailbox

Before you can check mailbox contents, you need to select one with
```javascript
client.<span class="apidocCodeKeywordSpan">openMailbox</span>(path[, options], callback)
```

Where

* **path** is the path to the mailbox (ie. "INBOX" or "INBOX/Arhiiv") or a mailbox object
* **options** is an optional options object
* **options.readOnly** - if set to true, open the mailbox in read-only mode (downloading messages does not update seen/unseen flag
)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.removeFlags" id="apidoc.element.inbox.IMAPClient.prototype.removeFlags">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>removeFlags
        <span class="apidocSignatureSpan">(uid, flags, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeFlags = function (uid, flags, callback){
    flags = [].concat(flags || []);
    this.updateFlags(uid, flags, "-", callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
query = {unseen: true, not: {seen: true}}
```

Returned list is already sorted and all values are numbers.

### Message flags

You can add and remove message flags like `\Seen` or `\Answered` with `client.addFlags()` and `client.<span class="apidocCodeKeywordSpan
">removeFlags</span>()`

**List flags**
```javascript
client.fetchFlags(uid, callback)
```

Where
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.removeLabels" id="apidoc.element.inbox.IMAPClient.prototype.removeLabels">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>removeLabels
        <span class="apidocSignatureSpan">(uid, labels, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeLabels = function (uid, labels, callback){
    labels = [].concat(labels || []);
    this.updateLabels(uid, labels, "-", callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.search" id="apidoc.element.inbox.IMAPClient.prototype.search">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>search
        <span class="apidocSignatureSpan">(query, isUid, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">search = function (query, isUid, callback){
    if(!callback &amp;&amp; typeof isUid == "function"){
        callback = isUid;
        isUid = undefined;
    }

    var queryType = isUid ? "UID SEARCH" : "SEARCH",
        self = this,

        buildTerm = function(query){
            return Object.keys(query).map(function(key){
                var term = key.toUpperCase(),
                    params = [],
                    escapeDate = function(date){
                        return self._escapeString(date.toUTCString().replace(/^\w+, (\d+) (\w+) (\d+).*/, "$1-$2-$3"));
                    },
                    escapeParam = function(param){
                        var list = [];
                        if(typeof param == "number"){
                            list.push(String(param));
                        }else if(typeof param == "string"){
                            list.push(self._escapeString(param));
                        }else if(Object.prototype.toString.call(param) == "[object Date]"){
                            list.push(escapeDate(param));
                        }else if(Array.isArray(param)){
                            param.map(escapeParam).forEach(function(p){
                                if(typeof p == "string"){
                                    list.push(p);
                                }
                            });
                        }else if(typeof param == "object"){
                            return buildTerm(param);
                        }
                        return list.join(" ");
                    };

                [].concat(query[key] || []).forEach(function(param){
                    param = escapeParam(param);
                    if(param){
                        params.push(param);
                    }
                });

                return term + (params.length ? " " + params.join(" ") : "");
            }).join(" ");
        },

        queryTerm = buildTerm(query);

    this._collectMailList = true;
    this._mailList = [];

    this._send(queryType + (queryTerm ? " " + queryTerm : ""), (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(status == "OK"){
            callback(null, this._mailList.sort(function(a, b){return a-b;}));
        }else{
            callback(new Error("Error searching messages"));
        }
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
automatically marked as read (\Seen flag is set) when the message is fetched.

### Searching for messages

You can search for messages with

```javascript
client.<span class="apidocCodeKeywordSpan">search</span>(query[, isUID], callback)
```

Where

* **query** is the search term as an object
* **isUID** is an optional boolean value - if set to true perform `UID SEARCH` instead of `SEARCH`
* **callback** is the callback function with error object and an array of matching seq or UID numbers
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.storeMessage" id="apidoc.element.inbox.IMAPClient.prototype.storeMessage">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>storeMessage
        <span class="apidocSignatureSpan">(message, flags, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">storeMessage = function (message, flags, callback){
    if(typeof flags == "function" &amp;&amp; !callback){
        callback = flags;
        flags = undefined;
    }

    message = message || "";
    if(typeof message == "string"){
        message = new Buffer(message, "utf-8");
    }

    flags = [].concat(flags || []);
    this._send("APPEND " + this._escapeString(this._selectedMailbox.path) + (flags.length ? " (" + flags.join(" ")+")":"") + " {" +
message.length+"}", (function(status, data){
        this._literalHandler = null;
        if(status == "OK"){
            this._shouldCheckOnIdle = true;

            // supports APPENDUID
            if(data &amp;&amp; data[0] &amp;&amp; data[0].params &amp;&amp; data[0].params[0] == "APPENDUID"){
                return callback(null, {
                    UIDValidity: data[0].params[1] || "",
                    UID: data[0].params[2] || ""
                });
            }

            // Guess the values from mailbox data. Not sure if it really works :S
            return callback(null, {
                UIDValidity: this._selectedMailbox.UIDValidity,
                UID: this._selectedMailbox.UIDNext
            });
        }else{
            return callback(new Error("Error saving message to mailbox"));
        }
    }).bind(this), (function(){
        this._literalHandler = (function(){
            this._connection.write(message);
            this._connection.write("\r\n");
        }).bind(this);
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
client.removeFlags(123, ["\\Flagged"], function(err, flags){
  console.log("Current flags for a message: ", flags);
});
```

### Upload a message

You can upload a message to current mailbox with `client.<span class="apidocCodeKeywordSpan">storeMessage</span>()`
```javascript
client.storeMessage(message[, flags], callback)
```

Where

* **message** is the message to be uploaded either as a string or a Buffer.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.updateFlags" id="apidoc.element.inbox.IMAPClient.prototype.updateFlags">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>updateFlags
        <span class="apidocSignatureSpan">(uid, flags, updateType, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateFlags = function (uid, flags, updateType, callback){
    flags = [].concat(flags || []);

    if(!callback &amp;&amp; typeof updateType == "function"){
        callback = updateType;
        updateType = undefined;
    }

    updateType = (updateType || "").toString().trim();

    if(!uid){
        if(typeof callback == "function"){
            callback(new Error("Invalid UID value"));
        }
        return;
    }

    if(!Array.isArray(flags)){
        if(typeof callback == "function"){
            callback(new Error("Invalid flags value"));
        }
        return;
    }

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    this._send("UID STORE "+uid+" "+updateType+"FLAGS (" + flags.join(" ") + ")",
      (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(typeof callback == "function"){
            if(status == "OK"){
                if(!this._mailList.length){
                    callback(null, true);
                }else{
                    callback(null, this._mailList[0].flags || []);
                }
            }else{
                callback(new Error("Error setting flags"));
            }
        }

    }).bind(this),
    (function(){
        this._collectMailList = true;
        this._mailList = [];
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
client.fetchData(52, function(err, message){
    console.log(message);
});

//var stream = client.createMessageStream(52);
//client.createMessageStream(52).pipe(process.stdout, {end: false});

client.<span class="apidocCodeKeywordSpan">updateFlags</span>(52, ["\\Answered", "\\Flagged"], "+",
console.log)
client.removeFlags(52, ["\\Answered", "\\Flagged"], console.log)
client.addFlags(52, ["\\Flagged"], console.log)
*/

function walkMailboxes(name, level, node){
    level = level || 0;
    (node.listChildren || node.listMailboxes).call(node, function(err, list){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.IMAPClient.prototype.updateLabels" id="apidoc.element.inbox.IMAPClient.prototype.updateLabels">
        function <span class="apidocSignatureSpan">inbox.IMAPClient.prototype.</span>updateLabels
        <span class="apidocSignatureSpan">(uid, labels, updateType, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateLabels = function (uid, labels, updateType, callback){
    labels = [].concat(labels || []);

    if(!callback &amp;&amp; typeof updateType == "function"){
        callback = updateType;
        updateType = undefined;
    }

    updateType = (updateType || "").toString().trim();

    if(!uid){
        if(typeof callback == "function"){
            callback(new Error("Invalid UID value"));
        }
        return;
    }

    if(!Array.isArray(labels)){
        if(typeof callback == "function"){
            callback(new Error("Invalid labels value"));
        }
        return;
    }

    if(this._currentState != this.states.SELECTED){
        if(typeof callback == "function"){
            callback(new Error("No mailbox selected"));
        }
        return;
    }

    this._send("UID STORE "+uid+" "+updateType+"X-GM-LABELS (" + labels.join(" ") + ")",
      (function(status){
        this._collectMailList = false;

        if(typeof callback != "function"){
            return;
        }

        if(typeof callback == "function"){
            if(status == "OK"){
                if(!this._mailList.length){
                    callback(null, true);
                }else{
                    callback(null, this._mailList[0].labels || []);
                }
            }else{
                callback(new Error("Error setting labels"));
            }
        }

    }).bind(this),
    (function(){
        this._collectMailList = true;
        this._mailList = [];
    }).bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox.lineparser" id="apidoc.module.inbox.lineparser">module inbox.lineparser</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.lineparser.lineparser" id="apidoc.element.inbox.lineparser.lineparser">
        function <span class="apidocSignatureSpan">inbox.</span>lineparser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function IMAPLineParser(){
    Stream.call(this);
    this.writable = true;

    this._init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.super_" id="apidoc.element.inbox.lineparser.super_">
        function <span class="apidocSignatureSpan">inbox.lineparser.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stream() {
  EE.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox.lineparser.prototype" id="apidoc.module.inbox.lineparser.prototype">module inbox.lineparser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype._addToBranch" id="apidoc.element.inbox.lineparser.prototype._addToBranch">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_addToBranch
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addToBranch = function (){
    if(this._state == this.states.ATOM &amp;&amp; this.currentNode.value == "NIL"){
        this.currentNode.value = null;
    }
    this._branch.childNodes.push(this.currentNode);
    this._branch.lastNode = this.currentNode;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case " ":
case "\t":
    if(this._state == this.states.QUOTED){
        this.currentNode.value += curchar;
    }else if(this._state == this.states.ATOM &amp;&amp; this._escapedChar){
        this.currentNode.value += curchar;
    }else if(this._state == this.states.ATOM){
        this.<span class="apidocCodeKeywordSpan">_addToBranch</span>();
        this._state = this.states.DEFAULT;
        this._createNode();
    }
    break;

// Backspace is for escaping in quoted strings
case '\\':
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype._createNode" id="apidoc.element.inbox.lineparser.prototype._createNode">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_createNode
        <span class="apidocSignatureSpan">(defaultValue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_createNode = function (defaultValue){
    this.lastNode = this.currentNode;

    this.currentNode = {};

    if(defaultValue !== false){
        this.currentNode.value = defaultValue || "";
    }

    this.currentNode.parentNode = this._branch;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if(this._state == this.states.QUOTED){
        this.currentNode.value += curchar;
    }else if(this._state == this.states.ATOM &amp;&amp; this._escapedChar){
        this.currentNode.value += curchar;
    }else if(this._state == this.states.ATOM){
        this._addToBranch();
        this._state = this.states.DEFAULT;
        this.<span class="apidocCodeKeywordSpan">_createNode</span>();
    }
    break;

// Backspace is for escaping in quoted strings
case '\\':
    if(this._escapedChar || this._state == this.states.ATOM){
        this.currentNode.value += curchar;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype._init" id="apidoc.element.inbox.lineparser.prototype._init">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_init = function (){

<span class="apidocCodeCommentSpan">    /**
     * Current state the parser is in
     * @private
     */
</span>    this._state = this.states.DEFAULT;

    /**
     * Which quote symbol is used for current quoted string
     * @private
     */
    this._quoteMark = '';

    /**
     * Is the current character escaped by \
     * @private
     */
    this._escapedChar = false;

    /**
     * Parse tree to hold the parsed data structure
     * @private
     */
    this._parseTree = {
        childNodes: []
    };

    /**
     * Active branch, by default it's the tree itselt
     * @private
     */
    this._branch = this._parseTree;

    /**
     * Hold the original line data
     * @private
     */
    this._currentLine = "";

    /**
     * Starting node
     * @private
     */
    this.currentNode = {
        parentNode: this._branch,
        value: "",
        childNodes: []
    };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *
 * @constructor
 */
function IMAPLineParser(){
    Stream.call(this);
    this.writable = true;

    this.<span class="apidocCodeKeywordSpan">_init</span>();
}
utillib.inherits(IMAPLineParser, Stream);

/**
 * Possible states the parser can be in (Finite State Machine)
 */
IMAPLineParser.prototype.states = {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype._nodeWalker" id="apidoc.element.inbox.lineparser.prototype._nodeWalker">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_nodeWalker
        <span class="apidocSignatureSpan">(branch, local)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_nodeWalker = function (branch, local){
    var node, i, len, curnode, prevpos, literalLength;

    for(i=0, len = branch.length; i&lt;len; i++){
        node = branch[i];

        if((typeof node.value == "string" || node.value === null) &amp;&amp; !node.type){
            local.push(node.value);
        }else if(node.type == this.types.LITERAL){

            literalLength = node.literal.match(/\{(\d+)\}/);
            literalLength = literalLength &amp;&amp; Number(literalLength[1]) || 0;

            curnode = {
                literal: literalLength,
                value: node.value
            };

            local.push(curnode);
        }else if(node.type == this.types.PARTIAL){
            prevpos = local.length - 1;
            if(prevpos&lt;0){
                curnode = {};
            }else{
                curnode = local[prevpos];
                if(typeof curnode != "object" || Array.isArray(curnode)){
                    curnode = {
                        value: curnode
                    };
                }
            }

            local.splice(prevpos, 1, curnode);

            curnode.partial = [];

            if(node.childNodes.length == 1 &amp;&amp; typeof node.childNodes[0].value == "string"){
                curnode.partial = node.childNodes[0].value.split(".").map(Number);
            }else{
                this._nodeWalker(node.childNodes, curnode.partial);
            }

        }else if(node.type == this.types.PARAMS){
            if(!node.childNodes.length){
                local.push(node.value);
            }else{
                curnode = {};
                if(typeof node.value != "undefined"){
                    curnode.value = node.value;
                }
                local.push(curnode);
                curnode.params = [];
                this._nodeWalker(node.childNodes, curnode.params);
            }

        }else if(node.type == this.types.GROUP){
            curnode = [];
            local.push(curnode);
            this._nodeWalker(node.childNodes, curnode);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* Generates a structured object with the data currently known. Useful if you
* need to check parse status in the middle of the process
*
* @return {Array} Parsed data
*/
IMAPLineParser.prototype.finalize = function(){
   var tree = [];
   this.<span class="apidocCodeKeywordSpan">_nodeWalker</span>(this._parseTree.childNodes, tree);
   return tree;
};

// PRIVATE METHODS

/**
* Resets all internal variables and creates a new parse tree
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype._parseLine" id="apidoc.element.inbox.lineparser.prototype._parseLine">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>_parseLine
        <span class="apidocSignatureSpan">(line)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseLine = function (line){

    var i=0, curchar;

    while(i &lt; line.length){

        curchar = line.charAt(i);

        // Check all characters one by one
        switch(curchar){

            // Handle whitespace
            case " ":
            case "\t":
                if(this._state == this.states.QUOTED){
                    this.currentNode.value += curchar;
                }else if(this._state == this.states.ATOM &amp;&amp; this._escapedChar){
                    this.currentNode.value += curchar;
                }else if(this._state == this.states.ATOM){
                    this._addToBranch();
                    this._state = this.states.DEFAULT;
                    this._createNode();
                }
                break;

            // Backspace is for escaping in quoted strings
            case '\\':
                if(this._escapedChar || this._state == this.states.ATOM){
                    this.currentNode.value += curchar;
                }else if(this._state == this.states.QUOTED){
                    if( line.charAt(i+1) === this._quoteMark || this._state == this.states.QUOTED){
                        this._escapedChar = true;
                    // This is a modified copy the default case
                    }else if(this._state == this.states.ATOM){
                        this.currentNode.value += curchar;
                        this.currentNode.value += line.charAt(++i);
                    }
                }else if(this._state == this.states.DEFAULT){
                    this._state = this.states.ATOM;
                    this._createNode(curchar);
                }
                break;

            // Handle quotes, remember the quote type to allow other unescaped quotes
            case '"':
            case "'":
                if(this._escapedChar || (this._state == this.states.QUOTED &amp;&amp; this._quoteMark != curchar)){
                    this.currentNode.value += curchar;
                }else if(this._state == this.states.DEFAULT){
                    this._quoteMark = curchar;
                    this._state = this.states.QUOTED;
                    this._createNode();
                }else if(this._state == this.states.QUOTED){
                    this._addToBranch();
                    this._state = this.states.DEFAULT;
                    this._createNode();
                }else if(this._state == this.states.ATOM ){

                    if( i === 0 || [ ' ', '\t', '"', "'", '[', '(', '&lt;' ].indexOf( line.charAt(i-1) ) &gt; -1 ){
                        this._addToBranch();
                        this._quoteMark = curchar;
                        this._state = this.states.QUOTED;
                        this._createNode();

                    // This is a modified copy the default case
                    }else if(this._state == this.states.ATOM || this._state == this.states.QUOTED){
                        this.currentNode.value += curchar;
                    }

                }
                break;

            // Handle different group types
            case "[":
            case "(":
            case "&lt;":
                if(this._escapedChar || this._state==this.states.QUOTED){
                    this.currentNode.value += curchar;
                    break;
                }

                if(this._state == this.states.ATOM){
                    this._addToBranch();
                }

                // () gets a separate node, [] uses last node as parent
                if(this._state == this.states.ATOM &amp;&amp; curchar == "["){
                    this._branch = this._branch.lastNode || this._parseTree;
                    this._branch.type = this.types.PARAMS;
                    if(!this._branch.childNodes){
                        this._branch.childNodes = [];
                    }
                }else{
                    // create new empty node
                    this._createNode(false);
                    switch(curchar){
                        case "(":
                            this.currentNode.type = this.types.GROUP;
                            break; ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param {Buffer|String} chunk Data to be appended to the parse string
* @return {Boolean} Always returns true
*/
IMAPLineParser.prototype.write = function(chunk){
   chunk = (chunk || "").toString("binary");
   this._currentLine += chunk;
   this.<span class="apidocCodeKeywordSpan">_parseLine</span>(chunk);
   return true;
};

/**
* If a literal occurs ({123}\r\n) do not parse it, since the length is known.
* Just add it separately and it will included as the node value instead of
* length property.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype.end" id="apidoc.element.inbox.lineparser.prototype.end">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>end
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (chunk){
    if(chunk &amp;&amp; chunk.length){
        this.write(chunk);
    }

    if(this.currentNode.value){
        if(this._state == this.states.ATOM || this._state==this.states.QUOTED){
            if(this._state == this.states.ATOM &amp;&amp; this.currentNode.value == "NIL"){
                this.currentNode.value = null;
            }
            this._branch.childNodes.push(this.currentNode);
        }
    }

    process.nextTick(this.emit.bind(this, "log", this._currentLine));
    process.nextTick(this.emit.bind(this, "line", this.finalize()));
    this._init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//  s.on('connect', function() {
//   require('starttls')(s, options, function() {
//      if (!s.authorized) {
//        s.destroy();
//        return;
//      }
//
//      s.<span class="apidocCodeKeywordSpan">end</span>("hello world\n");
//    });
//  });
//
//

/**
* @namespace Client STARTTLS module
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype.finalize" id="apidoc.element.inbox.lineparser.prototype.finalize">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>finalize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">finalize = function (){
    var tree = [];
    this._nodeWalker(this._parseTree.childNodes, tree);
    return tree;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
               this.currentNode.value = null;
           }
           this._branch.childNodes.push(this.currentNode);
       }
   }

   process.nextTick(this.emit.bind(this, "log", this._currentLine));
   process.nextTick(this.emit.bind(this, "line", this.<span class="apidocCodeKeywordSpan">finalize</span>()));
   this._init();
};

/**
* Generates a structured object with the data currently known. Useful if you
* need to check parse status in the middle of the process
*
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype.write" id="apidoc.element.inbox.lineparser.prototype.write">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>write
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (chunk){
    chunk = (chunk || "").toString("binary");
    this._currentLine += chunk;
    this._parseLine(chunk);
    return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Finishes current parsing and reesets internal variables. Emits 'line' event
 * with the parsed data
 *
 * @param {Buffer|String} chunk Data to be appended to the parse string
 */
IMAPLineParser.prototype.end = function(chunk){
if(chunk &amp;&amp; chunk.length){
    this.<span class="apidocCodeKeywordSpan">write</span>(chunk);
}

if(this.currentNode.value){
    if(this._state == this.states.ATOM || this._state==this.states.QUOTED){
        if(this._state == this.states.ATOM &amp;&amp; this.currentNode.value == "NIL"){
            this.currentNode.value = null;
        }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.lineparser.prototype.writeLiteral" id="apidoc.element.inbox.lineparser.prototype.writeLiteral">
        function <span class="apidocSignatureSpan">inbox.lineparser.prototype.</span>writeLiteral
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeLiteral = function (chunk){
    if(!this.currentNode.value){
        this.currentNode.value = "";
    }

    if(this.currentNode.type != this.types.LITERAL){
        //this.currentNode.literal = this.currentNode.value;
        this.currentNode.value = "";
        //this.currentNode.type = this.types.LITERAL;
    }

    this.currentNode.value += (chunk || "").toString("binary");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var cp = new IMAPLineParser();

//cp.write("A654 FETCH 2:4 (FLAGS BODY[HEADER.FIELDS (DATE FROM)])");
//cp.write("* 23 FETCH (FLAGS (\\Seen) UID 4827313)");
/*
cp.write("* 12 FETCH (BODY[HEADER] {342}");
cp.<span class="apidocCodeKeywordSpan">writeLiteral</span>("TERE TERE");
cp.write(" BODY[RFC] {123}");
cp.writeLiteral("VANA KERE");
cp.write(")");

cp.end();
*/
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox.mailbox" id="apidoc.module.inbox.mailbox">module inbox.mailbox</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.mailbox.Mailbox" id="apidoc.element.inbox.mailbox.Mailbox">
        function <span class="apidocSignatureSpan">inbox.mailbox.</span>Mailbox
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Mailbox(options){
    options = options || {};

    Object.defineProperty(this, "client", {
        value: options.client || {},
        enumerable: false
    });

    Object.defineProperty(this, "tags", {
        value: options.tags || [],
        enumerable: false,
        writable: true
    });

    this.name = options.name || "";
    this.path = options.path || this.name;
    this.type = options.type || (this.client._capabilities.indexOf("XLIST")&lt;0 &amp;&amp; this.detectType() || "Normal");
    this.delimiter = options.delimiter || this.client._mailboxDelimiter || "";
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.inbox.mailbox.detectMailboxType" id="apidoc.element.inbox.mailbox.detectMailboxType">
        function <span class="apidocSignatureSpan">inbox.mailbox.</span>detectMailboxType
        <span class="apidocSignatureSpan">(mailboxName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function detectMailboxType(mailboxName){
    mailboxName = (mailboxName || "").toString().trim().toLowerCase();

    if(mailboxNames.sent.indexOf(mailboxName)&gt;=0){
        return "Sent";
    }

    if(mailboxNames.trash.indexOf(mailboxName)&gt;=0){
        return "Trash";
    }

    if(mailboxNames.junk.indexOf(mailboxName)&gt;=0){
        return "Junk";
    }

    if(mailboxNames.drafts.indexOf(mailboxName)&gt;=0){
        return "Drafts";
    }

    return "Normal";
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox.starttls" id="apidoc.module.inbox.starttls">module inbox.starttls</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.starttls.starttls" id="apidoc.element.inbox.starttls.starttls">
        function <span class="apidocSignatureSpan">inbox.</span>starttls
        <span class="apidocSignatureSpan">(socket, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function starttls(socket, callback) {
    var sslcontext, pair, cleartext;

    socket.removeAllListeners("data");
    sslcontext = require('crypto').createCredentials();
    pair = require('tls').createSecurePair(sslcontext, false);
    cleartext = pipe(pair, socket);

    pair.on('secure', function() {
        var verifyError = (pair._ssl || pair.ssl).verifyError();

        if (verifyError) {
            cleartext.authorized = false;
            cleartext.authorizationError = verifyError;
        } else {
            cleartext.authorized = true;
        }

        callback(cleartext);
    });

    cleartext._controlReleased = true;
    return pair;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.inbox.xoauth" id="apidoc.module.inbox.xoauth">module inbox.xoauth</a></h1>


    <h2>
        <a href="#apidoc.element.inbox.xoauth.XOAuthGenerator" id="apidoc.element.inbox.xoauth.XOAuthGenerator">
        function <span class="apidocSignatureSpan">inbox.xoauth.</span>XOAuthGenerator
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function XOAuthGenerator(options){
    this.options = options || {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>